{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/imports/api/problem.js","imported":["Problems"],"specifiers":[{"kind":"named","imported":"Problems","local":"Problems"}]},{"source":"/imports/api/student.js","imported":["Students"],"specifiers":[{"kind":"named","imported":"Students","local":"Students"}]},{"source":"/imports/api/submission.js","imported":["Submissions","SubmissionResults"],"specifiers":[{"kind":"named","imported":"Submissions","local":"Submissions"},{"kind":"named","imported":"SubmissionResults","local":"SubmissionResults"}]},{"source":"./detail.html","imported":[],"specifiers":[]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/submission/detail.js","filenameRelative":"imports/ui/submission/detail.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/submission/detail.js.map","sourceFileName":"imports/ui/submission/detail.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"detail"},"ignored":false,"code":"var Problems = void 0;\nmodule.watch(require(\"/imports/api/problem.js\"), {\n\tProblems: function (v) {\n\t\tProblems = v;\n\t}\n}, 0);\nvar Students = void 0;\nmodule.watch(require(\"/imports/api/student.js\"), {\n\tStudents: function (v) {\n\t\tStudents = v;\n\t}\n}, 1);\nvar Submissions = void 0,\n    SubmissionResults = void 0;\nmodule.watch(require(\"/imports/api/submission.js\"), {\n\tSubmissions: function (v) {\n\t\tSubmissions = v;\n\t},\n\tSubmissionResults: function (v) {\n\t\tSubmissionResults = v;\n\t}\n}, 2);\nmodule.watch(require(\"./detail.html\"));\nTemplate.submission_detail.onCreated(function () {\n\tvar _this = this;\n\n\tthis.autorun(function () {\n\t\t_this.subscribe('Submissions.findOne', _this.data.currentSubmissionId.get());\n\n\t\t_this.subscribe('SubmissionResults.findAllBySubmission', _this.data.currentSubmissionId.get());\n\t});\n});\nTemplate.submission_detail.onRendered(function () {\n\tthis.$('.nav-link')[0].click();\n\tthis.$('[class*=edit]').hide();\n});\nTemplate.submission_detail.helpers({\n\tcurrentSubmission: function () {\n\t\tvar submission = Submissions.findOne({\n\t\t\t_id: this.currentSubmissionId.get()\n\t\t});\n\n\t\tif (submission == undefined) {\n\t\t\tthis.currentSubmissionId.set(null);\n\t\t} else {\n\t\t\tTemplate.instance().$('.detail-modal').modal();\n\t\t}\n\n\t\treturn submission;\n\t},\n\tsubmissionResultList: function () {\n\t\treturn SubmissionResults.find({\n\t\t\tsubmissionId: this.currentSubmissionId.get()\n\t\t}, {\n\t\t\tsort: {\n\t\t\t\tproblemTestId: 1\n\t\t\t}\n\t\t});\n\t},\n\tgetStudentUsername: function (studentId) {\n\t\treturn Meteor.getValue(Students, studentId, 'username');\n\t},\n\tgetProblemTitle: function (problemId) {\n\t\treturn Meteor.getValue(Problems, problemId, 'title');\n\t},\n\tfixedTime: function (date) {\n\t\treturn moment(date).format('YYYY/MM/DD HH:mm:ss');\n\t}\n});\nTemplate.submission_detail.events({\n\t'blur [class*=edit]': function (event, instance) {\n\t\tvar _Meteor$call;\n\n\t\tvar target = event.currentTarget;\n\t\tvar toggle = target.dataset.toggle;\n\t\tvar field = target.name;\n\t\tvar value = target.value;\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), (_Meteor$call = {}, _Meteor$call[field] = value, _Meteor$call));\n\t},\n\t'click [class*=view]': function (event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\tvar target = event.currentTarget;\n\t\tvar toggle = target.dataset.toggle;\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\t'click [type=checkbox]': function (event) {\n\t\tvar _Meteor$call2;\n\n\t\tvar target = event.currentTarget;\n\t\tvar field = target.name;\n\t\tvar value = target.checked;\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), (_Meteor$call2 = {}, _Meteor$call2[field] = value, _Meteor$call2));\n\t},\n\t'click [type=radio]': function (event) {\n\t\tvar _Meteor$call3;\n\n\t\tvar target = event.currentTarget;\n\t\tvar field = target.name;\n\t\tvar value = target.value;\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), (_Meteor$call3 = {}, _Meteor$call3[field] = value, _Meteor$call3));\n\t},\n\t'hidden.bs.modal .detail-modal': function () {\n\t\tthis.currentSubmissionId.set(null);\n\t}\n});","map":{"version":3,"sources":["imports/ui/submission/detail.js"],"names":["Problems","module","watch","require","v","Students","Submissions","SubmissionResults","Template","submission_detail","onCreated","autorun","subscribe","data","currentSubmissionId","get","onRendered","$","click","hide","helpers","currentSubmission","submission","findOne","_id","undefined","set","instance","modal","submissionResultList","find","submissionId","sort","problemTestId","getStudentUsername","studentId","Meteor","getValue","getProblemTitle","problemId","fixedTime","date","moment","format","events","event","target","currentTarget","toggle","dataset","field","name","value","show","call","isAdmin","focus","checked"],"mappings":"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","file":"imports/ui/submission/detail.js.map","sourcesContent":["import { Problems } from '/imports/api/problem.js';\nimport { Students } from '/imports/api/student.js';\nimport { Submissions, SubmissionResults } from '/imports/api/submission.js';\nimport './detail.html';\n\nTemplate.submission_detail.onCreated(function() {\n\tthis.autorun(() => {\n\t\tthis.subscribe('Submissions.findOne', this.data.currentSubmissionId.get());\n\t\tthis.subscribe('SubmissionResults.findAllBySubmission', this.data.currentSubmissionId.get());\n\t});\n});\n\nTemplate.submission_detail.onRendered(function() {\n\tthis.$('.nav-link')[0].click();\n\tthis.$('[class*=edit]').hide();\n});\n\nTemplate.submission_detail.helpers({\n\tcurrentSubmission() {\n\t\tconst submission = Submissions.findOne({ _id: this.currentSubmissionId.get() });\n\n\t\tif (submission == undefined) {\n\t\t\tthis.currentSubmissionId.set(null);\n\t\t} else {\n\t\t\tTemplate.instance().$('.detail-modal').modal();\n\t\t}\n\t\treturn submission;\n\t},\n\tsubmissionResultList() {\n\t\treturn SubmissionResults.find({ submissionId: this.currentSubmissionId.get() }, { sort: { problemTestId: 1 }});\n\t},\n\tgetStudentUsername(studentId) {\n\t\treturn Meteor.getValue(Students, studentId, 'username');\n\t},\n\tgetProblemTitle(problemId) {\n\t\treturn Meteor.getValue(Problems, problemId, 'title');\n\t},\n\tfixedTime(date) {\n\t\treturn moment(date).format('YYYY/MM/DD HH:mm:ss');\n\t}\n});\n\nTemplate.submission_detail.events({\n\t'blur [class*=edit]'(event, instance) {\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\t\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\n\t},\n\t'click [class*=view]'(event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\t\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\t'click [type=checkbox]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.checked;\n\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\n\t},\n\t'click [type=radio]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\t\n\t},\n\t'hidden.bs.modal .detail-modal'() {\n\t\tthis.currentSubmissionId.set(null);\n\t}\n});"]},"hash":"f40ad30f4302eedb3e718d4422b4983dd0b6f918"}
