{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/imports/api/submission.js","imported":["Submissions","SubmissionResults"],"specifiers":[{"kind":"named","imported":"Submissions","local":"Submissions"},{"kind":"named","imported":"SubmissionResults","local":"SubmissionResults"}]},{"source":"./detail.html","imported":[],"specifiers":[]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/submission/detail.js","filenameRelative":"imports/ui/submission/detail.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/submission/detail.js.map","sourceFileName":"imports/ui/submission/detail.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"detail"},"ignored":false,"code":"let Submissions, SubmissionResults;\nmodule.watch(require(\"/imports/api/submission.js\"), {\n\tSubmissions(v) {\n\t\tSubmissions = v;\n\t},\n\n\tSubmissionResults(v) {\n\t\tSubmissionResults = v;\n\t}\n\n}, 0);\nmodule.watch(require(\"./detail.html\"));\nTemplate.submission_detail.onCreated(function () {\n\tthis.autorun(() => {\n\t\tthis.subscribe('Submissions.findOne', this.data.currentSubmissionId.get());\n\t\tthis.subscribe('SubmissionResults.findAllBySubmission', this.data.currentSubmissionId.get());\n\t});\n});\nTemplate.submission_detail.onRendered(function () {\n\tthis.$('[class*=edit]').hide();\n});\nTemplate.submission_detail.helpers({\n\tcurrentSubmission() {\n\t\tconst submission = Submissions.findOne({\n\t\t\t_id: this.currentSubmissionId.get()\n\t\t});\n\n\t\tif (submission == undefined) {\n\t\t\tthis.currentSubmissionId.set(null);\n\t\t} else {\n\t\t\tTemplate.instance().$('.detail-modal').modal();\n\t\t\tTemplate.instance().$('.nav-link')[0].click();\n\t\t}\n\n\t\treturn submission;\n\t},\n\n\tsubmissionResultList() {\n\t\treturn SubmissionResults.find({\n\t\t\tsubmissionId: this.currentSubmissionId.get()\n\t\t}, {\n\t\t\tsort: {\n\t\t\t\tproblemTestId: 1\n\t\t\t}\n\t\t});\n\t}\n\n});\nTemplate.submission_detail.events({\n\t'blur [class*=edit]'(event, instance) {\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), {\n\t\t\t[field]: value\n\t\t});\n\t},\n\n\t'click [class*=view]'(event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\n\t'click [type=checkbox]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.checked;\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), {\n\t\t\t[field]: value\n\t\t});\n\t},\n\n\t'click [type=radio]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), {\n\t\t\t[field]: value\n\t\t});\n\t},\n\n\t'hidden.bs.modal .detail-modal'() {\n\t\tthis.currentSubmissionId.set(null);\n\t}\n\n});","map":{"version":3,"sources":["imports/ui/submission/detail.js"],"names":["Submissions","SubmissionResults","module","watch","require","v","Template","submission_detail","onCreated","autorun","subscribe","data","currentSubmissionId","get","onRendered","$","hide","helpers","currentSubmission","submission","findOne","_id","undefined","set","instance","modal","click","submissionResultList","find","submissionId","sort","problemTestId","events","event","target","currentTarget","toggle","dataset","field","name","value","show","Meteor","call","isAdmin","focus","checked"],"mappings":"AAAA,IAAIA,WAAJ,EAAgBC,iBAAhB;AAAkCC,OAAOC,KAAP,CAAaC,QAAQ,4BAAR,CAAb,EAAmD;AAACJ,aAAYK,CAAZ,EAAc;AAACL,gBAAYK,CAAZ;AAAc,EAA9B;;AAA+BJ,mBAAkBI,CAAlB,EAAoB;AAACJ,sBAAkBI,CAAlB;AAAoB;;AAAxE,CAAnD,EAA6H,CAA7H;AAAgIH,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb;AAGlKE,SAASC,iBAAT,CAA2BC,SAA3B,CAAqC,YAAW;AAC/C,MAAKC,OAAL,CAAa,MAAM;AAClB,OAAKC,SAAL,CAAe,qBAAf,EAAsC,KAAKC,IAAL,CAAUC,mBAAV,CAA8BC,GAA9B,EAAtC;AACA,OAAKH,SAAL,CAAe,uCAAf,EAAwD,KAAKC,IAAL,CAAUC,mBAAV,CAA8BC,GAA9B,EAAxD;AACA,EAHD;AAIA,CALD;AAOAP,SAASC,iBAAT,CAA2BO,UAA3B,CAAsC,YAAW;AAChD,MAAKC,CAAL,CAAO,eAAP,EAAwBC,IAAxB;AACA,CAFD;AAIAV,SAASC,iBAAT,CAA2BU,OAA3B,CAAmC;AAClCC,qBAAoB;AACnB,QAAMC,aAAanB,YAAYoB,OAAZ,CAAoB;AAAEC,QAAK,KAAKT,mBAAL,CAAyBC,GAAzB;AAAP,GAApB,CAAnB;;AAEA,MAAIM,cAAcG,SAAlB,EAA6B;AAC5B,QAAKV,mBAAL,CAAyBW,GAAzB,CAA6B,IAA7B;AACA,GAFD,MAEO;AACNjB,YAASkB,QAAT,GAAoBT,CAApB,CAAsB,eAAtB,EAAuCU,KAAvC;AACAnB,YAASkB,QAAT,GAAoBT,CAApB,CAAsB,WAAtB,EAAmC,CAAnC,EAAsCW,KAAtC;AACA;;AACD,SAAOP,UAAP;AACA,EAXiC;;AAYlCQ,wBAAuB;AACtB,SAAO1B,kBAAkB2B,IAAlB,CAAuB;AAAEC,iBAAc,KAAKjB,mBAAL,CAAyBC,GAAzB;AAAhB,GAAvB,EAAyE;AAAEiB,SAAM;AAAEC,mBAAe;AAAjB;AAAR,GAAzE,CAAP;AACA;;AAdiC,CAAnC;AAiBAzB,SAASC,iBAAT,CAA2ByB,MAA3B,CAAkC;AACjC,sBAAqBC,KAArB,EAA4BT,QAA5B,EAAsC;AACrC,QAAMU,SAASD,MAAME,aAArB;AACA,QAAMC,SAASF,OAAOG,OAAP,CAAeD,MAA9B;AACA,QAAME,QAAQJ,OAAOK,IAArB;AACA,QAAMC,QAAQN,OAAOM,KAArB;AAEAhB,WAAST,CAAT,CAAWmB,MAAX,EAAmBlB,IAAnB;AACAQ,WAAST,CAAT,CAAWqB,MAAX,EAAmBK,IAAnB;AAEAC,SAAOC,IAAP,CAAY,oBAAZ,EAAkC,KAAK/B,mBAAL,CAAyBC,GAAzB,EAAlC,EAAkE;AAAE,IAACyB,KAAD,GAASE;AAAX,GAAlE;AACA,EAXgC;;AAYjC,uBAAsBP,KAAtB,EAA6BT,QAA7B,EAAuC;AACtC,MAAI,CAACkB,OAAOE,OAAP,EAAL,EAAuB;AAEvB,QAAMV,SAASD,MAAME,aAArB;AACA,QAAMC,SAASF,OAAOG,OAAP,CAAeD,MAA9B;AAEAZ,WAAST,CAAT,CAAWmB,MAAX,EAAmBlB,IAAnB;AACAQ,WAAST,CAAT,CAAWqB,MAAX,EAAmBK,IAAnB,GAA0BI,KAA1B;AACA,EApBgC;;AAqBjC,yBAAwBZ,KAAxB,EAA+B;AAC9B,QAAMC,SAASD,MAAME,aAArB;AACA,QAAMG,QAAQJ,OAAOK,IAArB;AACA,QAAMC,QAAQN,OAAOY,OAArB;AAEAJ,SAAOC,IAAP,CAAY,oBAAZ,EAAkC,KAAK/B,mBAAL,CAAyBC,GAAzB,EAAlC,EAAkE;AAAE,IAACyB,KAAD,GAASE;AAAX,GAAlE;AACA,EA3BgC;;AA4BjC,sBAAqBP,KAArB,EAA4B;AAC3B,QAAMC,SAASD,MAAME,aAArB;AACA,QAAMG,QAAQJ,OAAOK,IAArB;AACA,QAAMC,QAAQN,OAAOM,KAArB;AAEAE,SAAOC,IAAP,CAAY,oBAAZ,EAAkC,KAAK/B,mBAAL,CAAyBC,GAAzB,EAAlC,EAAkE;AAAE,IAACyB,KAAD,GAASE;AAAX,GAAlE;AACA,EAlCgC;;AAmCjC,mCAAkC;AACjC,OAAK5B,mBAAL,CAAyBW,GAAzB,CAA6B,IAA7B;AACA;;AArCgC,CAAlC","file":"imports/ui/submission/detail.js.map","sourcesContent":["import { Submissions, SubmissionResults } from '/imports/api/submission.js';\nimport './detail.html';\n\nTemplate.submission_detail.onCreated(function() {\n\tthis.autorun(() => {\n\t\tthis.subscribe('Submissions.findOne', this.data.currentSubmissionId.get());\n\t\tthis.subscribe('SubmissionResults.findAllBySubmission', this.data.currentSubmissionId.get());\n\t});\n});\n\nTemplate.submission_detail.onRendered(function() {\n\tthis.$('[class*=edit]').hide();\n});\n\nTemplate.submission_detail.helpers({\n\tcurrentSubmission() {\n\t\tconst submission = Submissions.findOne({ _id: this.currentSubmissionId.get() });\n\n\t\tif (submission == undefined) {\n\t\t\tthis.currentSubmissionId.set(null);\n\t\t} else {\n\t\t\tTemplate.instance().$('.detail-modal').modal();\n\t\t\tTemplate.instance().$('.nav-link')[0].click();\n\t\t}\n\t\treturn submission;\n\t},\n\tsubmissionResultList() {\n\t\treturn SubmissionResults.find({ submissionId: this.currentSubmissionId.get() }, { sort: { problemTestId: 1 }});\n\t}\n});\n\nTemplate.submission_detail.events({\n\t'blur [class*=edit]'(event, instance) {\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\t\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\n\t},\n\t'click [class*=view]'(event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\t\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\t'click [type=checkbox]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.checked;\n\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\n\t},\n\t'click [type=radio]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\t\n\t},\n\t'hidden.bs.modal .detail-modal'() {\n\t\tthis.currentSubmissionId.set(null);\n\t}\n});"]},"hash":"12256204514225493c4ed46eef75d473c81091ab"}
