{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/imports/api/student.js","imported":["Students"],"specifiers":[{"kind":"named","imported":"Students","local":"Students"}]},{"source":"./detail.html","imported":[],"specifiers":[]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/student/detail.js","filenameRelative":"imports/ui/student/detail.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/student/detail.js.map","sourceFileName":"imports/ui/student/detail.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"detail"},"ignored":false,"code":"let Students;\nmodule.watch(require(\"/imports/api/student.js\"), {\n\tStudents(v) {\n\t\tStudents = v;\n\t}\n\n}, 0);\nmodule.watch(require(\"./detail.html\"));\nTemplate.student_detail.onCreated(function () {\n\tthis.autorun(() => this.subscribe('Students.findOne', this.data.currentStudentId.get()));\n});\nTemplate.student_detail.onRendered(function () {\n\tthis.$('[class*=edit]').hide();\n});\nTemplate.student_detail.helpers({\n\tcurrentStudent() {\n\t\tconst student = Students.findOne({\n\t\t\t_id: this.currentStudentId.get()\n\t\t});\n\n\t\tif (student == undefined) {\n\t\t\tthis.currentStudentId.set(null);\n\t\t}\n\n\t\treturn student;\n\t}\n\n});\nTemplate.student_detail.events({\n\t'blur [class*=edit]'(event, instance) {\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\t\tconsole.log(field);\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\tMeteor.call('Students.update', this.currentStudentId.get(), {\n\t\t\t[field]: value\n\t\t});\n\t},\n\n\t'click [class*=view]'(event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\n\t'click [type=checkbox]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.checked;\n\t\tMeteor.call('Students.update', this.currentStudentId.get(), {\n\t\t\t[field]: value\n\t\t});\n\t},\n\n\t'submit .chgpwd-form'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst oldPassword = target.oldPassword.value;\n\t\tconst newPassword = target.newPassword.value;\n\t\tevent.preventDefault();\n\t\tMeteor.call('Students.changePassword', oldPassword, newPassword);\n\t}\n\n});","map":{"version":3,"sources":["imports/ui/student/detail.js"],"names":["Students","module","watch","require","v","Template","student_detail","onCreated","autorun","subscribe","data","currentStudentId","get","onRendered","$","hide","helpers","currentStudent","student","findOne","_id","undefined","set","events","event","instance","target","currentTarget","toggle","dataset","field","name","value","console","log","show","Meteor","call","isAdmin","focus","checked","oldPassword","newPassword","preventDefault"],"mappings":"AAAA,IAAIA,QAAJ;AAAaC,OAAOC,KAAP,CAAaC,QAAQ,yBAAR,CAAb,EAAgD;AAACH,UAASI,CAAT,EAAW;AAACJ,aAASI,CAAT;AAAW;;AAAxB,CAAhD,EAA0E,CAA1E;AAA6EH,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb;AAG1FE,SAASC,cAAT,CAAwBC,SAAxB,CAAkC,YAAW;AAC5C,MAAKC,OAAL,CAAa,MAAM,KAAKC,SAAL,CAAe,kBAAf,EAAmC,KAAKC,IAAL,CAAUC,gBAAV,CAA2BC,GAA3B,EAAnC,CAAnB;AACA,CAFD;AAIAP,SAASC,cAAT,CAAwBO,UAAxB,CAAmC,YAAW;AAC7C,MAAKC,CAAL,CAAO,eAAP,EAAwBC,IAAxB;AACA,CAFD;AAIAV,SAASC,cAAT,CAAwBU,OAAxB,CAAgC;AAC/BC,kBAAiB;AAChB,QAAMC,UAAUlB,SAASmB,OAAT,CAAiB;AAAEC,QAAK,KAAKT,gBAAL,CAAsBC,GAAtB;AAAP,GAAjB,CAAhB;;AAEA,MAAIM,WAAWG,SAAf,EAA0B;AACzB,QAAKV,gBAAL,CAAsBW,GAAtB,CAA0B,IAA1B;AACA;;AACD,SAAOJ,OAAP;AACA;;AAR8B,CAAhC;AAWAb,SAASC,cAAT,CAAwBiB,MAAxB,CAA+B;AAC9B,sBAAqBC,KAArB,EAA4BC,QAA5B,EAAsC;AACrC,QAAMC,SAASF,MAAMG,aAArB;AACA,QAAMC,SAASF,OAAOG,OAAP,CAAeD,MAA9B;AACA,QAAME,QAAQJ,OAAOK,IAArB;AACA,QAAMC,QAAQN,OAAOM,KAArB;AACFC,UAAQC,GAAR,CAAYJ,KAAZ;AACEL,WAASX,CAAT,CAAWY,MAAX,EAAmBX,IAAnB;AACAU,WAASX,CAAT,CAAWc,MAAX,EAAmBO,IAAnB;AAEAC,SAAOC,IAAP,CAAY,iBAAZ,EAA+B,KAAK1B,gBAAL,CAAsBC,GAAtB,EAA/B,EAA4D;AAAE,IAACkB,KAAD,GAASE;AAAX,GAA5D;AACA,EAX6B;;AAY9B,uBAAsBR,KAAtB,EAA6BC,QAA7B,EAAuC;AACtC,MAAI,CAACW,OAAOE,OAAP,EAAL,EAAuB;AAEvB,QAAMZ,SAASF,MAAMG,aAArB;AACA,QAAMC,SAASF,OAAOG,OAAP,CAAeD,MAA9B;AAEAH,WAASX,CAAT,CAAWY,MAAX,EAAmBX,IAAnB;AACAU,WAASX,CAAT,CAAWc,MAAX,EAAmBO,IAAnB,GAA0BI,KAA1B;AACA,EApB6B;;AAqB9B,yBAAwBf,KAAxB,EAA+B;AAC9B,QAAME,SAASF,MAAMG,aAArB;AACA,QAAMG,QAAQJ,OAAOK,IAArB;AACA,QAAMC,QAAQN,OAAOc,OAArB;AAEAJ,SAAOC,IAAP,CAAY,iBAAZ,EAA+B,KAAK1B,gBAAL,CAAsBC,GAAtB,EAA/B,EAA4D;AAAE,IAACkB,KAAD,GAASE;AAAX,GAA5D;AACA,EA3B6B;;AA4B9B,uBAAsBR,KAAtB,EAA6B;AAC5B,QAAME,SAASF,MAAMG,aAArB;AACA,QAAMc,cAAcf,OAAOe,WAAP,CAAmBT,KAAvC;AACA,QAAMU,cAAchB,OAAOgB,WAAP,CAAmBV,KAAvC;AAEAR,QAAMmB,cAAN;AACAP,SAAOC,IAAP,CAAY,yBAAZ,EAAuCI,WAAvC,EAAoDC,WAApD;AACA;;AAnC6B,CAA/B","file":"imports/ui/student/detail.js.map","sourcesContent":["import { Students } from '/imports/api/student.js';\nimport './detail.html';\n\nTemplate.student_detail.onCreated(function() {\n\tthis.autorun(() => this.subscribe('Students.findOne', this.data.currentStudentId.get()));\n});\n\nTemplate.student_detail.onRendered(function() {\n\tthis.$('[class*=edit]').hide();\n});\n\nTemplate.student_detail.helpers({\n\tcurrentStudent() {\n\t\tconst student = Students.findOne({ _id: this.currentStudentId.get() });\n\n\t\tif (student == undefined) {\n\t\t\tthis.currentStudentId.set(null);\n\t\t}\n\t\treturn student;\n\t}\n});\n\nTemplate.student_detail.events({\n\t'blur [class*=edit]'(event, instance) {\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\nconsole.log(field);\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\t\n\t\tMeteor.call('Students.update', this.currentStudentId.get(), { [field]: value });\n\t},\n\t'click [class*=view]'(event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\t\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\t'click [type=checkbox]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.checked;\n\n\t\tMeteor.call('Students.update', this.currentStudentId.get(), { [field]: value });\n\t},\n\t'submit .chgpwd-form'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst oldPassword = target.oldPassword.value;\n\t\tconst newPassword = target.newPassword.value;\n\n\t\tevent.preventDefault();\n\t\tMeteor.call('Students.changePassword', oldPassword, newPassword);\n\t}\n});"]},"hash":"ba9039feb9d84d2bbcfce3672ede4b63c35c1eae"}
