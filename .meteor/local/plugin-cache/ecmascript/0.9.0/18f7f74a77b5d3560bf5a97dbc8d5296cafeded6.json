{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"./problem.js","imported":["ProblemTests"],"specifiers":[{"kind":"named","imported":"ProblemTests","local":"ProblemTests"}]},{"source":"child_process","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ps"}]},{"source":"fs","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"fs"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/api/_problem.js","filenameRelative":"imports/api/_problem.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/api/_problem.js.map","sourceFileName":"imports/api/_problem.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"_problem"},"ignored":false,"code":"let ProblemTests;\nmodule.watch(require(\"./problem.js\"), {\n\tProblemTests(v) {\n\t\tProblemTests = v;\n\t}\n\n}, 0);\nlet ps;\nmodule.watch(require(\"child_process\"), {\n\tdefault(v) {\n\t\tps = v;\n\t}\n\n}, 1);\nlet fs;\nmodule.watch(require(\"fs\"), {\n\tdefault(v) {\n\t\tfs = v;\n\t}\n\n}, 2);\nMeteor.methods({\n\t'ProblemTests.createDir'(id) {\n\t\tconst problemTest = ProblemTests.findOne({\n\t\t\t_id: id\n\t\t});\n\t\tconst dirpath = Meteor.dataPath + id;\n\t\tMeteor.wrapAsync(fs.mkdir)(dirpath);\n\t\tMeteor.call('ProblemTests.writeFile', id, 'input', problemTest.input);\n\t\tMeteor.call('ProblemTests.writeFile', id, 'output', problemTest.output);\n\t},\n\n\t'ProblemTests.writeFile'(id, field, content) {\n\t\tconst filepath = Meteor.dataPath + id + '/' + field;\n\t\tMeteor.wrapAsync(fs.writeFile)(filepath, content);\n\t},\n\n\t'ProblemTests.removeDir'(id) {\n\t\tconst dirpath = Meteor.dataPath + id;\n\t\tMeteor.wrapAsync(ps.exec)('rm -rf ' + dirpath);\n\t}\n\n});","map":{"version":3,"sources":["imports/api/_problem.js"],"names":["ProblemTests","module","watch","require","v","ps","default","fs","Meteor","methods","id","problemTest","findOne","_id","dirpath","dataPath","wrapAsync","mkdir","call","input","output","field","content","filepath","writeFile","exec"],"mappings":"AAAA,IAAIA,YAAJ;AAAiBC,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACH,cAAaI,CAAb,EAAe;AAACJ,iBAAaI,CAAb;AAAe;;AAAhC,CAArC,EAAuE,CAAvE;AAA0E,IAAIC,EAAJ;AAAOJ,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACG,SAAQF,CAAR,EAAU;AAACC,OAAGD,CAAH;AAAK;;AAAjB,CAAtC,EAAyD,CAAzD;AAA4D,IAAIG,EAAJ;AAAON,OAAOC,KAAP,CAAaC,QAAQ,IAAR,CAAb,EAA2B;AAACG,SAAQF,CAAR,EAAU;AAACG,OAAGH,CAAH;AAAK;;AAAjB,CAA3B,EAA8C,CAA9C;AAIrKI,OAAOC,OAAP,CAAe;AACd,0BAAyBC,EAAzB,EAA6B;AAC5B,QAAMC,cAAcX,aAAaY,OAAb,CAAqB;AAAEC,QAAKH;AAAP,GAArB,CAApB;AACA,QAAMI,UAAUN,OAAOO,QAAP,GAAgBL,EAAhC;AAEAF,SAAOQ,SAAP,CAAiBT,GAAGU,KAApB,EAA2BH,OAA3B;AACAN,SAAOU,IAAP,CAAY,wBAAZ,EAAsCR,EAAtC,EAA0C,OAA1C,EAAmDC,YAAYQ,KAA/D;AACAX,SAAOU,IAAP,CAAY,wBAAZ,EAAsCR,EAAtC,EAA0C,QAA1C,EAAoDC,YAAYS,MAAhE;AACA,EARa;;AASd,0BAAyBV,EAAzB,EAA6BW,KAA7B,EAAoCC,OAApC,EAA6C;AAC5C,QAAMC,WAAWf,OAAOO,QAAP,GAAgBL,EAAhB,GAAmB,GAAnB,GAAuBW,KAAxC;AACAb,SAAOQ,SAAP,CAAiBT,GAAGiB,SAApB,EAA+BD,QAA/B,EAAyCD,OAAzC;AACA,EAZa;;AAad,0BAAyBZ,EAAzB,EAA6B;AAC5B,QAAMI,UAAUN,OAAOO,QAAP,GAAgBL,EAAhC;AACAF,SAAOQ,SAAP,CAAiBX,GAAGoB,IAApB,EAA0B,YAAUX,OAApC;AACA;;AAhBa,CAAf","file":"imports/api/_problem.js.map","sourcesContent":["import { ProblemTests } from './problem.js';\nimport ps from 'child_process';\nimport fs from 'fs';\n\nMeteor.methods({\n\t'ProblemTests.createDir'(id) {\n\t\tconst problemTest = ProblemTests.findOne({ _id: id });\n\t\tconst dirpath = Meteor.dataPath+id;\n\n\t\tMeteor.wrapAsync(fs.mkdir)(dirpath);\n\t\tMeteor.call('ProblemTests.writeFile', id, 'input', problemTest.input);\n\t\tMeteor.call('ProblemTests.writeFile', id, 'output', problemTest.output);\n\t},\n\t'ProblemTests.writeFile'(id, field, content) {\n\t\tconst filepath = Meteor.dataPath+id+'/'+field;\n\t\tMeteor.wrapAsync(fs.writeFile)(filepath, content);\n\t},\n\t'ProblemTests.removeDir'(id) {\t\n\t\tconst dirpath = Meteor.dataPath+id;\n\t\tMeteor.wrapAsync(ps.exec)('rm -rf '+dirpath);\n\t}\n});"]},"hash":"18f7f74a77b5d3560bf5a97dbc8d5296cafeded6"}
