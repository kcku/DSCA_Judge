{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/imports/api/problem.js","imported":["Problems"],"specifiers":[{"kind":"named","imported":"Problems","local":"Problems"}]},{"source":"/imports/api/student.js","imported":["Students"],"specifiers":[{"kind":"named","imported":"Students","local":"Students"}]},{"source":"/imports/api/submission.js","imported":["Submissions"],"specifiers":[{"kind":"named","imported":"Submissions","local":"Submissions"}]},{"source":"./list.html","imported":[],"specifiers":[]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/submission/list.js","filenameRelative":"imports/ui/submission/list.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/submission/list.js.map","sourceFileName":"imports/ui/submission/list.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"list"},"ignored":false,"code":"let Problems;\nmodule.watch(require(\"/imports/api/problem.js\"), {\n\tProblems(v) {\n\t\tProblems = v;\n\t}\n\n}, 0);\nlet Students;\nmodule.watch(require(\"/imports/api/student.js\"), {\n\tStudents(v) {\n\t\tStudents = v;\n\t}\n\n}, 1);\nlet Submissions;\nmodule.watch(require(\"/imports/api/submission.js\"), {\n\tSubmissions(v) {\n\t\tSubmissions = v;\n\t}\n\n}, 2);\nmodule.watch(require(\"./list.html\"));\nTemplate.submission_list.onCreated(function () {\n\tthis.autorun(() => {\n\t\tconst filter = {};\n\t\tif (this.data.currentProblemId && this.data.currentProblemId.get()) filter.problemId = this.data.currentProblemId.get();\n\t\tif (this.data.currentStudentId && this.data.currentStudentId.get()) filter.studentId = this.data.currentStudentId.get();\n\t\tif (_.isEmpty(filter)) filter = null;\n\t\tthis.subscribe('Submissions.findAllByFilter', filter);\n\t});\n});\nTemplate.submission_list.helpers({\n\thasFilter() {\n\t\treturn this.currentProblemId && this.currentProblemId.get() || this.currentStudentId && this.currentStudentId.get();\n\t},\n\n\tsubmissionList() {\n\t\tconsole.log('gggggg');\n\t\treturn Submissions.find({}, {\n\t\t\tfields: {\n\t\t\t\t_id: 1,\n\t\t\t\tproblemId: 1,\n\t\t\t\tstudentId: 1,\n\t\t\t\tcreatedAt: 1,\n\t\t\t\tstatus: 1,\n\t\t\t\tisExam: 1\n\t\t\t}\n\t\t});\n\t},\n\n\tgetStudentUsername(studentId) {\n\t\treturn Meteor.getValue(Students, studentId, 'username');\n\t},\n\n\tgetProblemTitle(problemId) {\n\t\treturn Meteor.getValue(Problems, problemId, 'title');\n\t}\n\n});\nTemplate.submission_list.events({\n\t'click .remove-btn'(event) {\n\t\tconst id = event.currentTarget.parentElement.dataset.id;\n\t\tMeteor.call('Submissions.remove', {\n\t\t\t_id: id\n\t\t});\n\t},\n\n\t'click .update-btn'(event) {\n\t\tMeteor.call('Submissions.update', id, {});\n\t},\n\n\t'click .get-btn'(event) {\n\t\tconst id = event.currentTarget.dataset.id;\n\t\tthis.currentSubmissionId.set(id);\n\t}\n\n});","map":{"version":3,"sources":["imports/ui/submission/list.js"],"names":["Problems","module","watch","require","v","Students","Submissions","Template","submission_list","onCreated","autorun","filter","data","currentProblemId","get","problemId","currentStudentId","studentId","_","isEmpty","subscribe","helpers","hasFilter","submissionList","console","log","find","fields","_id","createdAt","status","isExam","getStudentUsername","Meteor","getValue","getProblemTitle","events","event","id","currentTarget","parentElement","dataset","call","currentSubmissionId","set"],"mappings":"AAAA,IAAIA,QAAJ;AAAaC,OAAOC,KAAP,CAAaC,QAAQ,yBAAR,CAAb,EAAgD;AAACH,UAASI,CAAT,EAAW;AAACJ,aAASI,CAAT;AAAW;;AAAxB,CAAhD,EAA0E,CAA1E;AAA6E,IAAIC,QAAJ;AAAaJ,OAAOC,KAAP,CAAaC,QAAQ,yBAAR,CAAb,EAAgD;AAACE,UAASD,CAAT,EAAW;AAACC,aAASD,CAAT;AAAW;;AAAxB,CAAhD,EAA0E,CAA1E;AAA6E,IAAIE,WAAJ;AAAgBL,OAAOC,KAAP,CAAaC,QAAQ,4BAAR,CAAb,EAAmD;AAACG,aAAYF,CAAZ,EAAc;AAACE,gBAAYF,CAAZ;AAAc;;AAA9B,CAAnD,EAAmF,CAAnF;AAAsFH,OAAOC,KAAP,CAAaC,QAAQ,aAAR,CAAb;AAK1RI,SAASC,eAAT,CAAyBC,SAAzB,CAAmC,YAAW;AAC7C,MAAKC,OAAL,CAAa,MAAM;AAClB,QAAMC,SAAS,EAAf;AACA,MAAI,KAAKC,IAAL,CAAUC,gBAAV,IAA8B,KAAKD,IAAL,CAAUC,gBAAV,CAA2BC,GAA3B,EAAlC,EAAoEH,OAAOI,SAAP,GAAmB,KAAKH,IAAL,CAAUC,gBAAV,CAA2BC,GAA3B,EAAnB;AACpE,MAAI,KAAKF,IAAL,CAAUI,gBAAV,IAA8B,KAAKJ,IAAL,CAAUI,gBAAV,CAA2BF,GAA3B,EAAlC,EAAoEH,OAAOM,SAAP,GAAmB,KAAKL,IAAL,CAAUI,gBAAV,CAA2BF,GAA3B,EAAnB;AACpE,MAAII,EAAEC,OAAF,CAAUR,MAAV,CAAJ,EAAuBA,SAAS,IAAT;AAEvB,OAAKS,SAAL,CAAe,6BAAf,EAA8CT,MAA9C;AACA,EAPD;AAQA,CATD;AAWAJ,SAASC,eAAT,CAAyBa,OAAzB,CAAiC;AAChCC,aAAY;AACX,SAAQ,KAAKT,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBC,GAAtB,EAA1B,IAA2D,KAAKE,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBF,GAAtB,EAA3F;AACA,EAH+B;;AAIhCS,kBAAiB;AAChBC,UAAQC,GAAR,CAAY,QAAZ;AACA,SAAOnB,YAAYoB,IAAZ,CAAiB,EAAjB,EAAqB;AAAEC,WAAQ;AAAEC,SAAK,CAAP;AAAUb,eAAW,CAArB;AAAwBE,eAAW,CAAnC;AAAsCY,eAAW,CAAjD;AAAoDC,YAAQ,CAA5D;AAA+DC,YAAQ;AAAvE;AAAV,GAArB,CAAP;AACA,EAP+B;;AAQhCC,oBAAmBf,SAAnB,EAA8B;AAC7B,SAAOgB,OAAOC,QAAP,CAAgB7B,QAAhB,EAA0BY,SAA1B,EAAqC,UAArC,CAAP;AACA,EAV+B;;AAWhCkB,iBAAgBpB,SAAhB,EAA2B;AAC1B,SAAOkB,OAAOC,QAAP,CAAgBlC,QAAhB,EAA0Be,SAA1B,EAAqC,OAArC,CAAP;AACA;;AAb+B,CAAjC;AAgBAR,SAASC,eAAT,CAAyB4B,MAAzB,CAAgC;AAC/B,qBAAoBC,KAApB,EAA2B;AAC1B,QAAMC,KAAKD,MAAME,aAAN,CAAoBC,aAApB,CAAkCC,OAAlC,CAA0CH,EAArD;AACAL,SAAOS,IAAP,CAAY,oBAAZ,EAAkC;AAAEd,QAAKU;AAAP,GAAlC;AACA,EAJ8B;;AAK/B,qBAAoBD,KAApB,EAA2B;AAC1BJ,SAAOS,IAAP,CAAY,oBAAZ,EAAkCJ,EAAlC,EAAsC,EAAtC;AACA,EAP8B;;AAQ/B,kBAAiBD,KAAjB,EAAwB;AACvB,QAAMC,KAAKD,MAAME,aAAN,CAAoBE,OAApB,CAA4BH,EAAvC;AACA,OAAKK,mBAAL,CAAyBC,GAAzB,CAA6BN,EAA7B;AACA;;AAX8B,CAAhC","file":"imports/ui/submission/list.js.map","sourcesContent":["import { Problems } from '/imports/api/problem.js';\r\nimport { Students } from '/imports/api/student.js';\r\nimport { Submissions } from '/imports/api/submission.js';\r\nimport './list.html';\r\n\r\nTemplate.submission_list.onCreated(function() {\r\n\tthis.autorun(() => {\r\n\t\tconst filter = {};\r\n\t\tif (this.data.currentProblemId && this.data.currentProblemId.get()) filter.problemId = this.data.currentProblemId.get();\r\n\t\tif (this.data.currentStudentId && this.data.currentStudentId.get()) filter.studentId = this.data.currentStudentId.get();\r\n\t\tif (_.isEmpty(filter)) filter = null;\r\n\t\t\r\n\t\tthis.subscribe('Submissions.findAllByFilter', filter);\r\n\t});\r\n});\r\n\r\nTemplate.submission_list.helpers({\r\n\thasFilter() {\r\n\t\treturn (this.currentProblemId && this.currentProblemId.get()) || (this.currentStudentId && this.currentStudentId.get());\r\n\t},\r\n\tsubmissionList() {\r\n\t\tconsole.log('gggggg');\r\n\t\treturn Submissions.find({}, { fields: { _id: 1, problemId: 1, studentId: 1, createdAt: 1, status: 1, isExam: 1 }});\r\n\t},\r\n\tgetStudentUsername(studentId) {\r\n\t\treturn Meteor.getValue(Students, studentId, 'username');\r\n\t},\r\n\tgetProblemTitle(problemId) {\r\n\t\treturn Meteor.getValue(Problems, problemId, 'title');\r\n\t}\r\n});\r\n\r\nTemplate.submission_list.events({\r\n\t'click .remove-btn'(event) {\r\n\t\tconst id = event.currentTarget.parentElement.dataset.id;\r\n\t\tMeteor.call('Submissions.remove', { _id: id });\r\n\t},\r\n\t'click .update-btn'(event) {\r\n\t\tMeteor.call('Submissions.update', id, {});\r\n\t},\r\n\t'click .get-btn'(event) {\r\n\t\tconst id = event.currentTarget.dataset.id;\r\n\t\tthis.currentSubmissionId.set(id);\r\n\t}\r\n});"]},"hash":"7a64e15caa6d7b719652bc13806936521fb3d689"}
