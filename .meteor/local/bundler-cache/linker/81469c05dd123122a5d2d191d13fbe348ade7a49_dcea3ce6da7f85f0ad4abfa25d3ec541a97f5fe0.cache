[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar EJSON = Package.ejson.EJSON;\nvar _ = Package.underscore._;\n\n/* Package-scope variables */\nvar ReactiveObject;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                      //\n// packages/mrt_reactive-object/packages/mrt_reactive-object.js                                         //\n//                                                                                                      //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                        //\n(function () {\n\n///////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                               //\n// packages/mrt:reactive-object/lib/reactive-object.js                                           //\n//                                                                                               //\n///////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                 //\nReactiveObject = function (properties) {                                                         // 1\n  var self;                                                                                      // 2\n  this._definePrivateProperty('_items', {});                                                     // 3\n  this._definePrivateProperty('_itemsDeps', {});                                                 // 4\n  self = this;                                                                                   // 5\n  if (_.isArray(properties)) {                                                                   // 6\n    _.each(properties, function(prop) {                                                          // 7\n      return self.defineProperty(prop, void 0);                                                  // 8\n    });                                                                                          // 9\n  }                                                                                              // 10\n  if (_.isObject(properties)) {                                                                  // 11\n    _.each(properties, function(value, prop) {                                                   // 12\n      return self.defineProperty(prop, value);                                                   // 13\n    });                                                                                          // 14\n  }                                                                                              // 15\n}                                                                                                // 16\n                                                                                                 // 17\nReactiveObject.prototype.wrapArrayMethods = function(name, array){                               // 18\n  var _this = this,                                                                              // 19\n        methodNames = ['pop', 'push', 'reverse', 'shift', 'sort', 'slice', 'unshift', 'splice']; // 20\n                                                                                                 // 21\n  _.each(methodNames, function(method){                                                          // 22\n    array[method] = function (){                                                                 // 23\n      _this._itemsDeps[name].changed();                                                          // 24\n      return Array.prototype[method].apply(this,arguments);                                      // 25\n    }                                                                                            // 26\n  });                                                                                            // 27\n                                                                                                 // 28\n  // Add method to return method-free array                                                      // 29\n  array.clean = function (){                                                                     // 30\n    return _.filter(this, function(item) {                                                       // 31\n      return !Match.test(item, Function);                                                        // 32\n    });                                                                                          // 33\n  };                                                                                             // 34\n                                                                                                 // 35\n  return array;                                                                                  // 36\n};                                                                                               // 37\n                                                                                                 // 38\n                                                                                                 // 39\nReactiveObject.prototype.defineProperty = function(name, value) {                                // 40\n  Object.defineProperty(this, name, {                                                            // 41\n    configurable: true,                                                                          // 42\n    enumerable: true,                                                                            // 43\n    get: _.bind(this._propertyGet, this, name),                                                  // 44\n    set: _.bind(this._propertySet, this, name)                                                   // 45\n  });                                                                                            // 46\n                                                                                                 // 47\n  this[name] = value;                                                                            // 48\n  return this;                                                                                   // 49\n};                                                                                               // 50\n                                                                                                 // 51\nReactiveObject.prototype.undefineProperty = function(name) {                                     // 52\n  var dep;                                                                                       // 53\n  dep = this._itemsDeps[name];                                                                   // 54\n  delete this[name];                                                                             // 55\n  delete this._items[name];                                                                      // 56\n  delete this._itemsDeps[name];                                                                  // 57\n  if (dep) {                                                                                     // 58\n    dep.changed();                                                                               // 59\n  }                                                                                              // 60\n  return this;                                                                                   // 61\n};                                                                                               // 62\n                                                                                                 // 63\nReactiveObject.prototype.clone = function() {                                                    // 64\n  return new ReactiveObject(_.clone(this._items));                                               // 65\n};                                                                                               // 66\n                                                                                                 // 67\nReactiveObject.prototype.equals = function(obj) {                                                // 68\n  return (obj != null) && obj instanceof ReactiveObject && _.isEqual(obj._items, this._items);   // 69\n};                                                                                               // 70\n                                                                                                 // 71\nReactiveObject.prototype.typeName = function() {                                                 // 72\n  return 'reactive-object';                                                                      // 73\n};                                                                                               // 74\n                                                                                                 // 75\nReactiveObject.prototype.toJSONValue = function() {                                              // 76\n  return EJSON.toJSONValue(this._items);                                                         // 77\n};                                                                                               // 78\n                                                                                                 // 79\nReactiveObject.prototype._propertySet = function(name, value) {                                  // 80\n  var _base, _ref;                                                                               // 81\n                                                                                                 // 82\n  if(_.isArray(value)){                                                                          // 83\n    value = this.wrapArrayMethods(name, value);                                                  // 84\n  }                                                                                              // 85\n                                                                                                 // 86\n  this._items[name] = value;                                                                     // 87\n                                                                                                 // 88\n  if ((_base = this._itemsDeps)[name] == null) {                                                 // 89\n    _base[name] = new Deps.Dependency();                                                         // 90\n  }                                                                                              // 91\n                                                                                                 // 92\n  if ((_ref = this._itemsDeps[name]) != null) {                                                  // 93\n    _ref.changed();                                                                              // 94\n  }                                                                                              // 95\n                                                                                                 // 96\n  return this._items[name];                                                                      // 97\n};                                                                                               // 98\n                                                                                                 // 99\nReactiveObject.prototype._propertyGet = function(name) {                                         // 100\n  this._itemsDeps[name].depend();                                                                // 101\n  return this._items[name];                                                                      // 102\n};                                                                                               // 103\n                                                                                                 // 104\nReactiveObject.prototype._definePrivateProperty = function(name, value) {                        // 105\n  return Object.defineProperty(this, name, {                                                     // 106\n    configurable: true,                                                                          // 107\n    enumerable: false,                                                                           // 108\n    writable: true,                                                                              // 109\n    value: value                                                                                 // 110\n  });                                                                                            // 111\n};                                                                                               // 112\n                                                                                                 // 113\n                                                                                                 // 114\nEJSON.addType('reactive-object', function(jsonObj) {                                             // 115\n  return new ReactiveObject(jsonObj);                                                            // 116\n});                                                                                              // 117\n                                                                                                 // 118\n///////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\n(function (pkg, symbols) {\n  for (var s in symbols)\n    (s in pkg) || (pkg[s] = symbols[s]);\n})(Package['mrt:reactive-object'] = {}, {\n  ReactiveObject: ReactiveObject\n});\n\n})();\n","servePath":"/packages/mrt_reactive-object.js"}]