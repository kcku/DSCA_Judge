{"version":3,"sources":["meteor://ðŸ’»app/imports/ui/problem/detail.js","meteor://ðŸ’»app/imports/ui/problem/list.js","meteor://ðŸ’»app/imports/ui/problem/test.js","meteor://ðŸ’»app/imports/ui/problem/upload.js","meteor://ðŸ’»app/imports/ui/problem/main.js","meteor://ðŸ’»app/imports/ui/student/detail.js","meteor://ðŸ’»app/imports/ui/student/list.js","meteor://ðŸ’»app/imports/ui/student/main.js","meteor://ðŸ’»app/imports/ui/submission/detail.js","meteor://ðŸ’»app/imports/ui/submission/list.js","meteor://ðŸ’»app/imports/ui/submission/main.js","meteor://ðŸ’»app/imports/api/problem.js","meteor://ðŸ’»app/imports/api/student.js","meteor://ðŸ’»app/imports/api/submission.js","meteor://ðŸ’»app/imports/api/utility.js","meteor://ðŸ’»app/client/main.js"],"names":["Problems","module","watch","require","v","Template","problem_detail","onCreated","autorun","subscribe","data","currentProblemId","get","onRendered","$","hide","helpers","currentProblem","problem","findOne","_id","undefined","set","events","event","instance","target","currentTarget","toggle","dataset","field","name","value","show","Meteor","call","isAdmin","focus","checked","problem_list","problemList","find","fields","title","isExam","isPublic","sort","id","ProblemTests","problem_test","currentProblemTestId","ReactiveVar","problemTestList","problemId","currentProblemTest","problemTest","problem_upload","lang","code","preventDefault","userId","problem_main","click","shareArgs","Students","student_detail","currentStudentId","currentStudent","student","console","log","oldPassword","newPassword","student_list","studentList","username","student_main","Submissions","SubmissionResults","submission_detail","currentSubmissionId","currentSubmission","submission","modal","submissionResultList","submissionId","problemTestId","submission_list","studentId","submissionList","filter","$or","createdAt","status","submission_main","getProblemTitle","getValue","getStudentUsername","getStatusClass","export","Mongo","Collection","isServer","publish","option","methods","insert","description","inputFormat","outputFormat","hint","forEach","remove","update","$set","input","output","timeLimit","memoryLimit","score","submissionResult","Random","users","fullname","emails","year","Accounts","createUser","password","email","Date","getFullYear","setUsername","setPassword","addEmail","_","isEmpty","isOwner","getTime","collection","doc","user","MeteorMathJax","sourceUrl","registerHelper","date","momentReactive","body","loginWithPassword","logout"],"mappings":"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","file":"/app.js","sourcesContent":["import { Problems } from '/imports/api/problem.js';\r\nimport './detail.html';\r\n\r\nTemplate.problem_detail.onCreated(function() {\r\n\tthis.autorun(() => this.subscribe('Problems.findOne', this.data.currentProblemId.get()));\r\n});\r\n\r\nTemplate.problem_detail.onRendered(function() {\r\n\tthis.$('[class*=edit]').hide();\r\n});\r\n\r\nTemplate.problem_detail.helpers({\r\n\tcurrentProblem() {\r\n\t\tconst problem = Problems.findOne({ _id: this.currentProblemId.get() });\r\n\r\n\t\tif (problem == undefined) {\r\n\t\t\tthis.currentProblemId.set(null);\r\n\t\t}\r\n\t\treturn problem;\r\n\t}\r\n});\r\n\r\nTemplate.problem_detail.events({\r\n\t'blur [class*=edit]'(event, instance) {\r\n\t\tconst target = event.currentTarget;\r\n\t\tconst toggle = target.dataset.toggle;\r\n\t\tconst field = target.name;\r\n\t\tconst value = target.value;\r\n\r\n\t\tinstance.$(target).hide();\r\n\t\tinstance.$(toggle).show();\r\n\t\t\r\n\t\tMeteor.call('Problems.update', this.currentProblemId.get(), { [field]: value });\r\n\t},\r\n\t'click [class*=view]'(event, instance) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\t\t\r\n\t\tconst target = event.currentTarget;\r\n\t\tconst toggle = target.dataset.toggle;\r\n\r\n\t\tinstance.$(target).hide();\r\n\t\tinstance.$(toggle).show().focus();\r\n\t},\r\n\t'click [type=checkbox]'(event) {\r\n\t\tconst target = event.currentTarget;\r\n\t\tconst field = target.name;\r\n\t\tconst value = target.checked;\r\n\r\n\t\tMeteor.call('Problems.update', this.currentProblemId.get(), { [field]: value });\r\n\t}\r\n});","import { Problems } from '/imports/api/problem.js';\r\nimport './list.html';\r\n\r\nTemplate.problem_list.onCreated(function() {\r\n\tthis.subscribe('Problems.findAll');\r\n});\r\n\r\nTemplate.problem_list.helpers({\r\n\tproblemList() {\r\n\t\treturn Problems.find({}, { fields: { _id: 1, title: 1, isExam: 1, isPublic: 1 }, sort: { title: 1 }});\r\n\t}\r\n});\r\n\r\nTemplate.problem_list.events({\r\n\t'click .insert-btn'() {\r\n\t\tMeteor.call('Problems.insert');\r\n\t},\r\n\t'click .remove-btn'(event) {\r\n\t\tconst id = event.currentTarget.dataset.id;\r\n\t\tMeteor.call('Problems.remove', { _id: id });\r\n\t},\r\n\t'click .get-btn'(event) {\r\n\t\tconst id = event.currentTarget.dataset.id;\r\n\t\tthis.currentProblemId.set(id);\r\n\t}\r\n});","import { ProblemTests } from '/imports/api/problem.js';\r\nimport './test.html';\r\n\r\nTemplate.problem_test.onCreated(function() {\r\n\tthis.currentProblemTestId = new ReactiveVar();\r\n\tthis.autorun(() => this.subscribe('ProblemTests.findOne', this.currentProblemTestId.get()));\r\n\tthis.autorun(() => this.subscribe('ProblemTests.findAllByProblem', this.data.currentProblemId.get()));\r\n});\r\n\r\nTemplate.problem_test.onRendered(function() {\r\n\tthis.$('[class*=edit]').hide();\r\n});\r\n\r\nTemplate.problem_test.helpers({\r\n\tproblemTestList() {\r\n\t\treturn ProblemTests.find({ problemId: this.currentProblemId.get() }, { fields: { _id: 1, isPublic: 1 }, sort: { _id: 1 }});\r\n\t},\r\n\tcurrentProblemTest() {\r\n\t\tconst problemTest = ProblemTests.findOne({ _id: Template.instance().currentProblemTestId.get(), problemId: this.currentProblemId.get() });\r\n\t\t\r\n\t\tif (problemTest == undefined) {\r\n\t\t\tTemplate.instance().currentProblemTestId.set(null);\r\n\t\t}\r\n\t\treturn problemTest;\r\n\t}\r\n});\r\n\r\nTemplate.problem_test.events({\r\n\t'click .insert-btn'() {\r\n\t\tMeteor.call('ProblemTests.insert', this.currentProblemId.get());\r\n\t},\r\n\t'click .remove-btn'(event) {\r\n\t\tconst id = event.currentTarget.dataset.id;\r\n\t\tMeteor.call('ProblemTests.remove', { _id: id });\r\n\t},\r\n\t'click .get-btn'(event, instance) {\r\n\t\tconst id = event.currentTarget.dataset.id;\r\n\t\tinstance.currentProblemTestId.set(id);\r\n\t},\r\n\t'blur [class*=edit]'(event, instance) {\r\n\t\tconst target = event.currentTarget;\r\n\t\tconst toggle = target.dataset.toggle;\r\n\t\tconst field = target.name;\r\n\t\tconst value = target.value;\r\n\r\n\t\tinstance.$(target).hide();\r\n\t\tinstance.$(toggle).show();\r\n\t\t\r\n\t\tMeteor.call('ProblemTests.update', instance.currentProblemTestId.get(), { [field]: value });\r\n\t},\r\n\t'click [class*=view]'(event, instance) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\t\t\r\n\t\tconst target = event.currentTarget;\r\n\t\tconst toggle = target.dataset.toggle;\r\n\r\n\t\tinstance.$(target).hide();\r\n\t\tinstance.$(toggle).show().focus();\r\n\t},\r\n\t'click [type=checkbox]'(event, instance) {\r\n\t\tconst target = event.currentTarget;\r\n\t\tconst field = target.name;\r\n\t\tconst value = target.checked;\r\n\r\n\t\tMeteor.call('ProblemTests.update', instance.currentProblemTestId.get(), { [field]: value });\r\n\t}\r\n});","import './upload.html';\r\n\r\nTemplate.problem_upload.events({\r\n\t'submit .upload-form'(event) {\r\n\t\tconst target = event.currentTarget;\r\n\t\tconst lang = target.lang.value;\r\n\t\tconst code = target.code.value;\r\n\r\n\t\ttarget.code.value = null;\r\n\t\tevent.preventDefault();\r\n\t\tMeteor.call('Submissions.insert', this.currentProblemId.get(), Meteor.userId(), lang, code);\r\n\t}\r\n});\r\n\r\n","import './list.js';\r\nimport './detail.js';\r\nimport './test.js';\r\nimport './upload.js';\r\nimport '../submission/main.js';\r\nimport './main.html';\r\n\r\nTemplate.problem_main.onCreated(function() {\r\n\tthis.currentProblemId = new ReactiveVar();\r\n});\r\n\r\nTemplate.problem_main.onRendered(function() {\r\n\tthis.$('.nav-link')[0].click();\r\n});\r\n\r\nTemplate.problem_main.helpers({\r\n\tshareArgs() {\r\n\t\treturn { currentProblemId: Template.instance().currentProblemId };\r\n\t}\r\n});","import { Students } from '/imports/api/student.js';\nimport './detail.html';\n\nTemplate.student_detail.onCreated(function() {\n\tthis.autorun(() => this.subscribe('Students.findOne', this.data.currentStudentId.get()));\n});\n\nTemplate.student_detail.onRendered(function() {\n\tthis.$('[class*=edit]').hide();\n});\n\nTemplate.student_detail.helpers({\n\tcurrentStudent() {\n\t\tconst student = Students.findOne({ _id: this.currentStudentId.get() });\n\n\t\tif (student == undefined) {\n\t\t\tthis.currentStudentId.set(null);\n\t\t}\n\t\treturn student;\n\t}\n});\n\nTemplate.student_detail.events({\n\t'blur [class*=edit]'(event, instance) {\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\nconsole.log(field, value);\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\t\n\t\tMeteor.call('Students.update', this.currentStudentId.get(), { [field]: value });\n\t},\n\t'click [class*=view]'(event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\t\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\t'click [type=checkbox]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.checked;\n\n\t\tMeteor.call('Students.update', this.currentStudentId.get(), { [field]: value });\n\t},\n\t'submit .chgpwd-form'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst oldPassword = target.oldPassword.value;\n\t\tconst newPassword = target.newPassword.value;\n\n\t\tevent.preventDefault();\n\t\tMeteor.call('Students.changePassword', oldPassword, newPassword);\n\t}\n});","import { Students } from '/imports/api/student.js';\nimport './list.html';\n\nTemplate.student_list.onCreated(function() {\n\tthis.subscribe('Students.findAll');\n});\n\nTemplate.student_list.helpers({\n\tstudentList() {\n\t\treturn Students.find({}, { fields: { _id: 1, username: 1, isAdmin: 1 }, sort: { username: 1 }});\n\t}\n});\n\nTemplate.student_list.events({\n\t'click .insert-btn'() {\n\t\tMeteor.call('Students.insert');\n\t},\n\t'click .remove-btn'(event) {\n\t\tconst id = event.currentTarget.dataset.id;\n\t\tMeteor.call('Students.remove', { _id: id });\n\t},\n\t'click .get-btn'(event) {\n\t\tconst id = event.currentTarget.dataset.id;\n\t\tthis.currentStudentId.set(id);\n\t}\n});","import './list.js';\nimport './detail.js';\nimport '../submission/main.js';\nimport './main.html';\n\nTemplate.student_main.onCreated(function() {\n\tthis.currentStudentId = new ReactiveVar();\n});\n\nTemplate.student_main.onRendered(function() {\n\tthis.$('.nav-link')[0].click();\n});\n\nTemplate.student_main.helpers({\n\tshareArgs() {\n\t\treturn { currentStudentId: Template.instance().currentStudentId };\n\t}\n});","import { Submissions, SubmissionResults } from '/imports/api/submission.js';\nimport './detail.html';\n\nTemplate.submission_detail.onCreated(function() {\n\tthis.autorun(() => {\n\t\tthis.subscribe('Submissions.findOne', this.data.currentSubmissionId.get());\n\t\tthis.subscribe('SubmissionResults.findAllBySubmission', this.data.currentSubmissionId.get());\n\t});\n});\n\nTemplate.submission_detail.onRendered(function() {\n\tthis.$('.nav-link')[0].click();\n\tthis.$('[class*=edit]').hide();\n});\n\nTemplate.submission_detail.helpers({\n\tcurrentSubmission() {\n\t\tconst submission = Submissions.findOne({ _id: this.currentSubmissionId.get() });\n\n\t\tif (submission == undefined) {\n\t\t\tthis.currentSubmissionId.set(null);\n\t\t} else {\n\t\t\tTemplate.instance().$('.detail-modal').modal();\n\t\t}\n\t\treturn submission;\n\t},\n\tsubmissionResultList() {\n\t\treturn SubmissionResults.find({ submissionId: this.currentSubmissionId.get() }, { sort: { problemTestId: 1 }});\n\t}\n});\n\nTemplate.submission_detail.events({\n\t'blur [class*=edit]'(event, instance) {\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show();\n\t\t\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\n\t},\n\t'click [class*=view]'(event, instance) {\n\t\tif (!Meteor.isAdmin()) return;\n\t\t\n\t\tconst target = event.currentTarget;\n\t\tconst toggle = target.dataset.toggle;\n\n\t\tinstance.$(target).hide();\n\t\tinstance.$(toggle).show().focus();\n\t},\n\t'click [type=checkbox]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.checked;\n\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\n\t},\n\t'click [type=radio]'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst field = target.name;\n\t\tconst value = target.value;\n\n\t\tMeteor.call('Submissions.update', this.currentSubmissionId.get(), { [field]: value });\t\n\t},\n\t'hidden.bs.modal .detail-modal'() {\n\t\tthis.currentSubmissionId.set(null);\n\t}\n});","import { Submissions } from '/imports/api/submission.js';\r\nimport './list.html';\r\n\r\nTemplate.submission_list.onCreated(function() {\r\n\tthis.autorun(() => {\r\n\t\tconst problemId = this.data.currentProblemId ? this.data.currentProblemId.get() : null;\r\n\t\tconst studentId = this.data.currentStudentId ? this.data.currentStudentId.get() : null;\r\n\t\tthis.subscribe('Submissions.findAllByFilter', problemId, studentId);\r\n\t});\r\n});\r\n\r\nTemplate.submission_list.helpers({\r\n\tsubmissionList() {\r\n\t\tconst problemId = this.currentProblemId ? this.currentProblemId.get() : null;\r\n\t\tconst studentId = this.currentStudentId ? this.currentStudentId.get() : null;\r\n\t\tconst filter = { $or: [{ problemId: problemId }, { studentId: studentId }]};\r\n\t\treturn Submissions.find(filter, { fields: { _id: 1, problemId: 1, studentId: 1, createdAt: 1, status: 1, isExam: 1 }, sort: { createdAt: -1 }});\r\n\t}\r\n});\r\n\r\nTemplate.submission_list.events({\r\n\t'click .remove-btn'(event) {\r\n\t\tconst id = event.currentTarget.dataset.id;\r\n\t\tMeteor.call('Submissions.remove', { _id: id });\r\n\t},\r\n\t'click .get-btn'(event) {\r\n\t\tconst id = event.currentTarget.dataset.id;\r\n\t\tthis.currentSubmissionId.set(id);\r\n\t}\r\n});","import { Problems } from '/imports/api/problem.js';\nimport { Students } from '/imports/api/student.js';\nimport './list.js';\nimport './detail.js';\nimport './main.html';\n\nTemplate.submission_main.onCreated(function() {\n\tthis.currentSubmissionId = new ReactiveVar();\n});\n\nTemplate.submission_main.helpers({\n\tshareArgs() {\n\t\treturn {\n\t\t\tcurrentProblemId: this.currentProblemId,\n\t\t\tcurrentStudentId: this.currentStudentId,\n\t\t\tcurrentSubmissionId: Template.instance().currentSubmissionId,\n\t\t\tgetProblemTitle(problemId) {\n\t\t\t\treturn Meteor.getValue(Problems, problemId, 'title');\n\t\t\t},\n\t\t\tgetStudentUsername(studentId) {\n\t\t\t\treturn Meteor.getValue(Students, studentId, 'username');\n\t\t\t},\n\t\t\tgetStatusClass(status) {\n\t\t\t\tswitch(status) {\n\t\t\t\t\tcase 'Accepted':      return 'text-success';\n\t\t\t\t\tcase 'Compile Error': return 'text-warning';\n\t\t\t\t\tcase 'Pending':\n\t\t\t\t\tcase 'Initializing':\n\t\t\t\t\tcase 'Compiling':\n\t\t\t\t\tcase 'Running':\n\t\t\t\t\tcase 'Judging':       return 'text-info';\n\t\t\t\t\tdefault:              return 'text-danger';\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});","import { SubmissionResults } from './submission.js';\r\nimport './utility.js';\r\n\r\nexport const Problems = new Mongo.Collection('Problems');\r\nexport const ProblemTests = new Mongo.Collection('ProblemTests');\r\n\r\nif (Meteor.isServer) {\r\n\tMeteor.publish('Problems.findAll', function() {\r\n\t\tconst filter = {};\r\n\t\tconst option = { fields: { _id: 1, title: 1, isExam: 1, isPublic: 1 }};\r\n\r\n\t\tif (!Meteor.isAdmin()) {\r\n\t\t\tfilter.isPublic = true;\r\n\t\t}\r\n\t\treturn Problems.find(filter, option);\r\n\t});\r\n\tMeteor.publish('Problems.findOne', function(id) {\r\n\t\tconst filter = { _id: id };\r\n\t\tconst option = {};\r\n\r\n\t\tif (!Meteor.isAdmin()) {\r\n\t\t\tfilter.isPublic = true;\r\n\t\t}\r\n\t\treturn Problems.find(filter, option);\r\n\t});\r\n\tMeteor.publish('ProblemTests.findAllByProblem', function(problemId) {\r\n\t\tconst filter = { problemId: problemId };\r\n\t\tconst option = { fields: { _id: 1, problemId: 1, isPublic: 1 }};\r\n\r\n\t\tif (!Meteor.isAdmin()) {\r\n\t\t\tif (!Meteor.getValue(Problems, problemId, 'isPublic')) {\r\n\t\t\t\tfilter.problemId = null;\r\n\t\t\t}\r\n\t\t\tfilter.isPublic = true;\r\n\t\t}\r\n\t\treturn ProblemTests.find(filter, option);\r\n\t});\r\n\tMeteor.publish('ProblemTests.findOne', function(id) {\r\n\t\tconst filter = { _id: id };\r\n\t\tconst option = {};\r\n\r\n\t\tif (!Meteor.isAdmin()) {\r\n\t\t\tconst problemId = Meteor.getValue(ProblemTests, id, 'problemId');\r\n\r\n\t\t\tif (!Meteor.getValue(Problems, problemId, 'isPublic')) {\r\n\t\t\t\tfilter._id = null;\r\n\t\t\t}\r\n\t\t\tfilter.isPublic = true;\r\n\t\t}\r\n\t\treturn ProblemTests.find(filter, option);\r\n\t});\r\n}\r\n\r\nMeteor.methods({\r\n\t'Problems.insert'() {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tProblems.insert({\r\n\t\t\ttitle: 'Sample Title',\r\n\t\t\tdescription: 'Sample Description',\r\n\t\t\tinputFormat: 'Sample Input Format',\r\n\t\t\toutputFormat: 'Sample Output Format',\r\n\t\t\thint: 'Sample Hint',\r\n\t\t\tisExam: false,\r\n\t\t\tisPublic: false\r\n\t\t});\r\n\t},\r\n\t'Problems.remove'(filter) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tProblems.find(filter).forEach((problem) => {\r\n\t\t\tMeteor.call('ProblemTests.remove', { problemId: problem._id });\r\n\t\t\tMeteor.call('Submissions.remove', { problemId: problem._id });\t\r\n\t\t});\r\n\t\tProblems.remove(filter);\r\n\t},\r\n\t'Problems.update'(id, option) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tProblems.update({ _id: id }, { $set: option });\r\n\t},\r\n\t'ProblemTests.insert'(problemId) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tconst problemTestId = ProblemTests.insert({\r\n\t\t\tproblemId: problemId,\r\n\t\t\tinput: 'Sample Input',\r\n\t\t\toutput: 'Sample Output',\r\n\t\t\ttimeLimit: 1000,\r\n\t\t\tmemoryLimit: 64000,\r\n\t\t\tscore: 5,\r\n\t\t\tisPublic: false\r\n\t\t});\r\n\t\tif (Meteor.isServer) {\r\n\t\t\tMeteor.call('ProblemTests.createDir', problemTestId);\r\n\t\t}\r\n\t},\r\n\t'ProblemTests.remove'(filter) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tProblemTests.find(filter).forEach((problemTest) => {\r\n\t\t\tMeteor.call('SubmissionResults.remove', { problemTestId: problemTest._id });\r\n\r\n\t\t\tif (Meteor.isServer) {\r\n\t\t\t\tMeteor.call('ProblemTests.removeDir', problemTest._id);\r\n\t\t\t}\r\n\t\t});\r\n\t\tProblemTests.remove(filter);\r\n\t},\r\n\t'ProblemTests.update'(id, option) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tProblemTests.update({ _id: id }, { $set: option });\r\n\r\n\t\tif (Meteor.isServer) {\r\n\t\t\tif (option.input) Meteor.call('ProblemTests.writeFile', id, 'input', option.input);\r\n\t\t\tif (option.output) Meteor.call('ProblemTests.writeFile', id, 'output', option.output);\r\n\t\t\tif (option.score) {\r\n\t\t\t\tSubmissionResults.find({ problemTestId: id }).forEach((submissionResult) => {\r\n\t\t\t\t\tMeteor.call('Submissions.getResult', submissionResult.submissionId);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});","import { Random } from 'meteor/random';\nimport './utility.js';\n\nexport const Students = Meteor.users;\n\nif (Meteor.isServer) {\n\tMeteor.publish('Students.findAll', function() {\n\t\tconst filter = {};\n\t\tconst option = { fields: { _id: 1, username: 1, isAdmin: 1 }};\n\n\t\treturn Students.find(filter, option);\n\t});\n\tMeteor.publish('Students.findOne', function(id) {\n\t\tconst filter = { _id: id };\n\t\tconst option = { fields: { _id: 1, username: 1, fullname: 1, emails: 1, year: 1, isAdmin: 1 }};\n\n\t\treturn Students.find(filter, option);\n\t});\n}\n\nMeteor.methods({\n\t'Students.insert'() {\n\t\tif (!Meteor.isAdmin()) return;\n\n\t\tAccounts.createUser({\n\t\t\tusername: 'Sample Username',\n\t\t\tfullname: 'Sample Fullname',\n\t\t\tpassword: Random.id(),\n\t\t\temail: 'dsca@inrg.csie.ntu.edu.tw',\t\n\t\t\tyear: new Date().getFullYear(),\n\t\t\tisAdmin: false\n\t\t});\n\t},\n\t'Students.remove'(filter) {\n\t\tif (!Meteor.isAdmin()) return;\n\n\t\tStudents.find(filter).forEach((student) => {\n\t\t\tMeteor.call('Submissions.remove', { studentId: student._id });\n\t\t});\n\t\tStudents.remove(filter);\n\t},\n\t'Students.update'(id, option) {\n\t\tif (!Meteor.isAdmin() || !Meteor.isServer) return;\n\n\t\tif (option.username) {\n\t\t\tAccounts.setUsername(id, option.username);\n\t\t\tdelete option.username;\n\t\t}\n\t\tif (option.password) {\n\t\t\tAccounts.setPassword(id, option.password);\n\t\t\tdelete option.password;\n\t\t}\n\t\tif (option.email) {\n\t\t\tStudents.update({ _id: id }, { $set: { emails: [] }});\n\t\t\tAccounts.addEmail(id, option.email);\n\t\t\tdelete option.email;\n\t\t}\n\t\tif (!_.isEmpty(option)) {\n\t\t\tStudents.update({ _id: id }, { $set: option });\n\t\t}\n\t},\n\t'Students.changePassword'(oldPassword, newPassword) {\n\t\tif (!Meteor.isServer) return;\n\n\t\tMeteor.call('changePassword', oldPassword, newPassword);\n\t}\n});","import { Problems, ProblemTests } from './problem.js';\r\nimport './utility.js';\r\n\r\nexport const Submissions = new Mongo.Collection('Submissions');\r\nexport const SubmissionResults = new Mongo.Collection('SubmissionResults');\r\n\r\nif (Meteor.isServer) {\r\n\tMeteor.publish('Submissions.findAllByFilter', function(problemId, studentId) {\r\n\t\tconst filter = { $or: [{ problemId: problemId }, { studentId, studentId }]};\r\n\t\tconst option = { fields: { _id: 1, problemId: 1, studentId: 1, createdAt: 1, status: 1, score: 1, isExam: 1 }};\r\n\r\n\t\treturn Submissions.find(filter, option);\r\n\t});\r\n\tMeteor.publish('Submissions.findOne', function(id) {\r\n\t\tconst filter = { _id: id };\r\n\t\tconst option = {};\r\n\r\n\t\tif (!Meteor.isAdmin() && !Meteor.isOwner(Meteor.getValue(Submissions, id, 'studentId'))) {\r\n\t\t\toption.fields = { code: 0 };\r\n\t\t}\r\n\t\treturn Submissions.find(filter, option);\r\n\t});\r\n\tMeteor.publish('SubmissionResults.findAllBySubmission', function(submissionId) {\r\n\t\tconst filter = { submissionId: submissionId };\r\n\t\tconst option = {};\r\n\r\n\t\treturn SubmissionResults.find(filter, option);\r\n\t});\r\n}\r\n\r\nMeteor.methods({\r\n\t'Submissions.insert'(problemId, studentId, lang, code) {\r\n\t\tif (!Meteor.isAdmin() && (!Meteor.isOwner(studentId) || !Meteor.getValue(Problems, problemId, 'isPublic'))) return;\r\n\t\t\r\n\t\tconst submissionId = Submissions.insert({\r\n\t\t\tproblemId: problemId,\r\n\t\t\tstudentId: studentId,\r\n\t\t\tcreatedAt: new Date().getTime(),\r\n\t\t\tstatus: 'Pending',\r\n\t\t\tscore: 0,\r\n\t\t\tlang: lang,\r\n\t\t\tcode: code,\r\n\t\t\tisExam: Meteor.getValue(Problems, problemId, 'isExam')\r\n\t\t});\r\n\t\tif (Meteor.isServer) {\r\n\t\t\tMeteor.call('Submissions.createDir', submissionId);\r\n\t\t}\r\n\t},\r\n\t'Submissions.remove'(filter) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tif (Meteor.isServer) {\r\n\t\t\tSubmissions.find(filter).forEach((submission) => {\r\n\t\t\t\tMeteor.call('SubmissionResults.remove', { submissionId: submission._id });\r\n\t\t\t\tMeteor.call('Submissions.removeDir', submission._id);\r\n\t\t\t});\r\n\t\t}\r\n\t\tSubmissions.remove(filter);\r\n\t},\r\n\t'Submissions.update'(id, option) {\r\n\t\tif (!Meteor.isAdmin()) return;\r\n\r\n\t\tSubmissions.update({ _id: id }, { $set: option });\r\n\r\n\t\tif (Meteor.isServer) {\r\n\t\t\tMeteor.call('SubmissionResults.remove', { submissionId: id });\r\n\t\t\tMeteor.call('Submissions.createDir', id);\r\n\t\t}\r\n\t}\r\n});","Meteor.getValue = function(collection, id, field) {\n\tconst doc = collection.findOne({ _id: id }, { fields: { [field]: 1 }});\n\treturn doc ? doc[field] : null;\n}\n\nMeteor.isAdmin = function() {\n\tconst user = Meteor.user();\n\treturn user && user.isAdmin;\n}\n\nMeteor.isOwner = function(id) {\n\tconst user = Meteor.user();\n\treturn user && user._id == id;\n}","import '/imports/ui/problem/main.js';\nimport '/imports/ui/student/main.js';\n\nMeteorMathJax.sourceUrl = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';\n\nTemplate.registerHelper(\"momentReactive\", (date) => momentReactive(date));\n\nTemplate.body.onCreated(function() {\n\tthis.autorun(() => this.subscribe('Students.findOne', Meteor.userId()));\n});\n\nTemplate.body.onRendered(() => {\n\tthis.$('.nav-link')[1].click();\n});\n\nTemplate.body.events({\n\t'submit .login-form'(event) {\n\t\tconst target = event.currentTarget;\n\t\tconst username = target.username.value;\n\t\tconst password = target.password.value;\n\n\t\tevent.preventDefault();\n\t\tMeteor.loginWithPassword(username, password);\n\t},\n\t'submit .logout-form'(event) {\n\t\tevent.preventDefault();\n\t\tMeteor.logout();\n\t}\n});"]}